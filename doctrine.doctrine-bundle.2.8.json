{
    "manifests": {
        "doctrine/doctrine-bundle": {
            "manifest": {
                "bundles": {
                    "Doctrine\\Bundle\\DoctrineBundle\\DoctrineBundle": [
                        "all"
                    ]
                },
                "copy-from-recipe": {
                    "config/": "%CONFIG_DIR%/",
                    "src/": "%SRC_DIR%/"
                },
                "env": {
                    "#1": "Format described at https://www.doctrine-project.org/projects/doctrine-dbal/en/latest/reference/configuration.html#connecting-using-a-url",
                    "#2": "IMPORTANT: You MUST configure your server version, either here or in config/packages/doctrine.yaml",
                    "#3": "",
                    "#4": "DATABASE_URL=\"sqlite:///%kernel.project_dir%/var/data.db\"",
                    "#5": "DATABASE_URL=\"mysql://app:!ChangeMe!@127.0.0.1:3306/app?serverVersion=8&charset=utf8mb4\"",
                    "DATABASE_URL": "postgresql://app:!ChangeMe!@127.0.0.1:5432/app?serverVersion=15&charset=utf8"
                },
                "dockerfile": [
                    "RUN apk add --no-cache --virtual .pgsql-deps postgresql-dev; \\",
                    "\tdocker-php-ext-install -j$(nproc) pdo_pgsql; \\",
                    "\tapk add --no-cache --virtual .pgsql-rundeps so:libpq.so.5; \\",
                    "\tapk del .pgsql-deps"
                ],
                "docker-compose": {
                    "docker-compose.yml": {
                        "services": [
                            "database:",
                            "  image: postgres:${POSTGRES_VERSION:-15}-alpine",
                            "  environment:",
                            "    POSTGRES_DB: ${POSTGRES_DB:-app}",
                            "    # You should definitely change the password in production",
                            "    POSTGRES_PASSWORD: ${POSTGRES_PASSWORD:-!ChangeMe!}",
                            "    POSTGRES_USER: ${POSTGRES_USER:-app}",
                            "  volumes:",
                            "    - db-data:/var/lib/postgresql/data:rw",
                            "    # You may use a bind-mounted host directory instead, so that it is harder to accidentally remove the volume and lose all your data!",
                            "    # - ./docker/db/data:/var/lib/postgresql/data:rw"
                        ],
                        "volumes": [
                            "db-data:"
                        ]
                    },
                    "docker-compose.override.yml": {
                        "services": [
                            "database:",
                            "  ports:",
                            "    - \"5432\""
                        ]
                    }
                },
                "conflict": {
                    "doctrine/orm": "<2.14",
                    "symfony/dependency-injection": "<6.2",
                    "symfony/framework-bundle": "<5.3"
                },
                "post-install-output": [
                    "  * Modify your DATABASE_URL config in <fg=green>.env</>",
                    "",
                    "  * Configure the <fg=green>driver</> (postgresql) and",
                    "    <fg=green>server_version</> (15) in <fg=green>config/packages/doctrine.yaml</>"
                ]
            },
            "files": {
                "config/packages/doctrine.php": {
                    "contents": [
                        "<?php",
                        "",
                        "declare(strict_types=1);",
                        "",
                        "use Symfony\\Component\\DependencyInjection\\Loader\\Configurator\\ContainerConfigurator;",
                        "",
                        "return static function (ContainerConfigurator $containerConfigurator): void {",
                        "    $containerConfigurator->extension('doctrine', [",
                        "        'dbal' => [",
                        "            'url' => '%env(resolve:DATABASE_URL)%',",
                        "        ],",
                        "        'orm' => [",
                        "            'auto_generate_proxy_classes' => true,",
                        "            'enable_lazy_ghost_objects' => true,",
                        "            'naming_strategy' => 'doctrine.orm.naming_strategy.underscore_number_aware',",
                        "            'auto_mapping' => true,",
                        "            'mappings' => [",
                        "                'App' => [",
                        "                    'is_bundle' => false,",
                        "                    'dir' => '%kernel.project_dir%/src/Entity',",
                        "                    'prefix' => 'App\\Entity',",
                        "                    'alias' => 'App',",
                        "                ],",
                        "            ],",
                        "        ],",
                        "    ]);",
                        "    if ($containerConfigurator->env() === 'test') {",
                        "        $containerConfigurator->extension('doctrine', [",
                        "            'dbal' => [",
                        "                'dbname_suffix' => '_test%env(default::TEST_TOKEN)%',",
                        "            ],",
                        "        ]);",
                        "    }",
                        "    if ($containerConfigurator->env() === 'prod') {",
                        "        $containerConfigurator->extension('doctrine', [",
                        "            'orm' => [",
                        "                'auto_generate_proxy_classes' => false,",
                        "                'proxy_dir' => '%kernel.build_dir%/doctrine/orm/Proxies',",
                        "                'query_cache_driver' => [",
                        "                    'type' => 'pool',",
                        "                    'pool' => 'doctrine.system_cache_pool',",
                        "                ],",
                        "                'result_cache_driver' => [",
                        "                    'type' => 'pool',",
                        "                    'pool' => 'doctrine.result_cache_pool',",
                        "                ],",
                        "            ],",
                        "        ]);",
                        "        $containerConfigurator->extension('framework', [",
                        "            'cache' => [",
                        "                'pools' => [",
                        "                    'doctrine.result_cache_pool' => [",
                        "                        'adapter' => 'cache.app',",
                        "                    ],",
                        "                    'doctrine.system_cache_pool' => [",
                        "                        'adapter' => 'cache.system',",
                        "                    ],",
                        "                ],",
                        "            ],",
                        "        ]);",
                        "    }",
                        "};",
                        ""
                    ],
                    "executable": false
                },
                "src/Entity/.gitignore": {
                    "contents": [
                        ""
                    ],
                    "executable": false
                },
                "src/Repository/.gitignore": {
                    "contents": [
                        ""
                    ],
                    "executable": false
                }
            },
            "ref": "aa7a06ff2e0c516c2c75d0bd6b1cf0f0ad47cc9a"
        }
    }
}
